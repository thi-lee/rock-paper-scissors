<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <button class='rock'>Rock</button>
        <button class='paper'>Paper</button>
        <button class='scissors'>Scissors</button>

        <script>
            // computer random a number, which corresponds to rock/paper/scissors
            function computerPlay() {
                // 1 = "rock", 2 = "paper", 3 = "scissors"
                let cselection = Math.floor(Math.random() * 3) + 1;
                return cselection;
            }

            function playerPlay(e) {
                let pselection;

                let rock = document.querySelector('.rock');
                rock.addEventListener('click', () => {
                    pselection = 1;
                })

                let paper = document.querySelector('.paper');
                paper.addEventListener('click', () => {
                    pselection = 2;
                })

                let scissors = document.querySelector('.scissors');
                scissors.addEventListener('click', () => {
                    pselection = 3;
                })
                return pselection;
            }

            function playRound(playerSelection, computerSelection) {
                if (playerSelection == 3 && computerSelection == 1 || 
                    playerSelection == 1 && computerSelection == 2 || 
                    playerSelection == 2 && computerSelection == 3) {
                    return `lost`;
                } else if (playerSelection == 2 && computerSelection == 1 || 
                            playerSelection == 3 && computerSelection == 2 || 
                            playerSelection == 1 && computerSelection == 3) {
                    return `won`;
                } else {
                    return `tie`;
                }
            }

            let buttons = document.querySelectorAll('button');
            buttons.forEach((button) => {
                button.addEventListener('click', () => {
                    let pselection;
                    if (button.className == 'rock') {
                        pselection = 1;
                    } else if (button.className == 'paper') {
                        pselection = 2;
                    } else if (button.className == 'scissors') {
                        pselection = 3;
                    }
                    console.log(typeof(pselection), pselection);
                    console.log(typeof(computerPlay()), computerPlay());
                    console.log(playRound(pselection, computerPlay()));
                })
            })

            /*
            function computerPlay() {
                // 1 = "rock", 2 = "paper", 3 = "scissors"
                let cselection = Math.floor(Math.random() * 3) + 1;
                return cselection;
            }
            // Play (function takes 2 parameters)

            function playerPlay() {
                let pselection = prompt(`Which do you choose? 1. rock, 2. paper, and 3. scissors`, ``);
                return +pselection;
            }

            function playRound(playerSelection, computerSelection) {
                if (playerSelection == 3 && computerSelection == 1 || 
                    playerSelection == 1 && computerSelection == 2 || 
                    playerSelection == 2 && computerSelection == 3) {
                    return `lost`;
                } else if (playerSelection == 2 && computerSelection == 1 || 
                            playerSelection == 3 && computerSelection == 2 || 
                            playerSelection == 1 && computerSelection == 3) {
                    return `won`;
                } else {
                    return `tie`;
                }
            }

            function game() {
                let ourMark = ``;
                let theirMark = ``;
                let us = 0;
                let them = 0;
                let playerSelection = playerPlay();
                let computerSelection = computerPlay();
                let res = playRound(playerSelection, computerSelection);
                if (res == `won`) {
                    ourMark += `|`;
                    console.log(`Ours: ${ourMark} Theirs: ${theirMark}`);
                    us++;
                } else if (res == `lost`) {
                    theirMark += `|`;
                    console.log(`Ours : ${ourMark} Theirs: ${theirMark}`);
                    them++;
                } else {
                    console.log(`Ours: ${ourMark} Theirs: ${theirMark}`);
                }

                if (us < them) {
                    console.log(`You lost.`);
                } else if (us > them) {
                    console.log(`You won.`);
                } else {
                    console.log(`You tie.`);
                }
            }

            game();
            */
        </script>
    </body>
</html>